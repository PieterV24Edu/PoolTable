{"version":3,"sources":["Classes.js"],"names":[],"mappings":"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","file":"Classes-compiled.js","sourcesContent":["class Ball\r\n{\r\n    constructor(name, type)\r\n    {\r\n        this.name = name;\r\n        this.Type = type;\r\n        this.inScene = true;\r\n        this.startPos = null;\r\n        this.Radius = 2.85;\r\n\r\n        this.Geometry = new THREE.SphereGeometry(this.Radius, 32, 32);\r\n        this.Material = new THREE.MeshPhongMaterial({color: 0xFFFFFF});\r\n        this.Mesh = new THREE.Mesh(this.Geometry, this.Material);\r\n        this.Mesh.position.y = 2.85;\r\n        this.Mesh.rotation.z = 0.5*Math.PI;\r\n        this.Mesh.rotation.y = 0.5*Math.PI;\r\n\r\n        this.Direction = new THREE.Vector3(0,0,0);\r\n        this.Direction.normalize();\r\n        this.speed = 0;\r\n        this.currentSpeed = new THREE.Vector3();\r\n        this.Mesh.castShadow = true;\r\n        this.Mesh.receiveShadow = true;\r\n\r\n        this.rayCaster = new THREE.Raycaster();\r\n        this.CollisionEvent = new Event(\"onCollision\");\r\n    }\r\n\r\n    CalcFrame(delta, tableGroup)\r\n    {\r\n        this.UpdateCurrentSpeed(delta);\r\n        if(this.Direction.x > 0)\r\n            this.CheckColistion(1,0,0, tableGroup, delta);\r\n        else if(this.Direction.x < 0)\r\n            this.CheckColistion(-1,0,0, tableGroup, delta);\r\n\r\n        if(this.Direction.z > 0)\r\n            this.CheckColistion(0,0,1, tableGroup, delta);\r\n        else if(this.Direction.z < 0)\r\n            this.CheckColistion(0,0,-1, tableGroup, delta);\r\n        //Move Ball\r\n        this.Mesh.position.add(this.currentSpeed);\r\n        this.UpdateRotation();\r\n        if(this.speed > 0.5)\r\n            this.speed -= ((0.35 * delta) * this.speed);\r\n        else\r\n            this.speed = 0;\r\n    }\r\n\r\n    CheckColistion(x,y,z, tGroup, delta)\r\n    {\r\n        var direction = new THREE.Vector3(x,y,z);\r\n        var directionSpeed = new THREE.Vector3().copy(this.currentSpeed).multiply(direction).toArray().reduce((a,b) => a + b, 0);\r\n        this.rayCaster.set(this.Mesh.position, direction);\r\n        var intersections = this.rayCaster.intersectObjects(tGroup);\r\n\r\n        if(intersections.length > 0)\r\n        {\r\n            var intersection = intersections[0];\r\n\r\n            if(intersection.distance < 3 || directionSpeed > intersection.distance) {\r\n                this.Direction.reflect(intersection.face.normal);\r\n                this.UpdateCurrentSpeed(delta);\r\n                document.dispatchEvent(this.CollisionEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateCurrentSpeed(delta)\r\n    {\r\n        this.currentSpeed.copy(this.Direction).multiplyScalar(delta * this.speed);\r\n    }\r\n\r\n    CheckBallCollision(otherBall)\r\n    {\r\n        var thisBallPos = new THREE.Vector3().copy(this.Mesh.position);\r\n        var otherBallPos = new THREE.Vector3().copy(otherBall.Mesh.position);\r\n\r\n        var distance = thisBallPos.distanceTo(otherBallPos);\r\n\r\n        if(distance < (this.Radius + otherBall.Radius))\r\n        {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    BallCollision(otherBall)\r\n    {\r\n        var thisBallPos = new THREE.Vector3().copy(this.Mesh.position);\r\n        var otherBallPos = new THREE.Vector3().copy(otherBall.Mesh.position);\r\n\r\n        var distance = thisBallPos.distanceTo(otherBallPos);\r\n\r\n        if(distance <= (this.Radius + otherBall.Radius))\r\n        {\r\n            var thisSpeed = new THREE.Vector3(this.Direction.x * this.speed, 0, this.Direction.z * this.speed);\r\n            var otherSpeed = new THREE.Vector3(otherBall.Direction.x * otherBall.speed, 0, otherBall.Direction.z * otherBall.speed);\r\n\r\n            var unitNormal = new THREE.Vector3(otherBallPos.x - thisBallPos.x, 0, otherBallPos.z - thisBallPos.z).normalize();\r\n            var unitTangent = new THREE.Vector3(-unitNormal.z, unitNormal.y, unitNormal.x);\r\n\r\n            var thisBallNV = unitNormal.dot(thisSpeed);\r\n            var otherBallNV = unitNormal.dot(otherSpeed);\r\n            var thisBallTV = unitTangent.dot(thisSpeed);\r\n            var otherBallTV = unitTangent.dot(otherSpeed);\r\n\r\n            var PthisBallNV = (thisBallNV * (this.Radius - otherBall.Radius) + 2 * otherBall.Radius * otherBallNV) / (this.Radius + otherBall.Radius);\r\n            var PotherBallNV = (otherBallNV * (otherBall.Radius - this.Radius) + 2 * this.Radius * thisBallNV) / (this.Radius + otherBall.Radius);\r\n\r\n            var thisBallNVec = new THREE.Vector3().copy(unitNormal).multiplyScalar(PthisBallNV);\r\n            var thisBallTVec = new THREE.Vector3().copy(unitTangent).multiplyScalar(thisBallTV);\r\n            var otherBallNVec = new THREE.Vector3().copy(unitNormal).multiplyScalar(PotherBallNV);\r\n            var otherBallTVec = new THREE.Vector3().copy(unitTangent).multiplyScalar(otherBallTV);\r\n\r\n            var thisBallVec = new THREE.Vector3().copy(thisBallNVec).add(thisBallTVec);\r\n            var otherBallVec = new THREE.Vector3().copy(otherBallNVec).add(otherBallTVec);\r\n\r\n            var thisBallSpeed = thisBallVec.length();\r\n            var otherBallSpeed = otherBallVec.length();\r\n\r\n            this.Direction = thisBallVec.normalize();\r\n            otherBall.Direction = otherBallVec.normalize();\r\n\r\n            this.SetSpeed(thisBallSpeed);\r\n            otherBall.SetSpeed(otherBallSpeed);\r\n        }\r\n    }\r\n\r\n    UpdateRotation()\r\n    {\r\n        var distance = this.currentSpeed.length();\r\n        var angle = (distance / (2*this.Radius*Math.PI)) * Math.PI;\r\n        var axis = new THREE.Vector3(this.Direction.z, 0, -this.Direction.x);\r\n\r\n        var quaternion = new THREE.Quaternion();\r\n        quaternion.setFromAxisAngle(axis, angle);\r\n        var curQuaternion = this.Mesh.quaternion;\r\n        curQuaternion.multiplyQuaternions(quaternion, curQuaternion);\r\n        curQuaternion.normalize();\r\n        this.Mesh.setRotationFromQuaternion(curQuaternion);\r\n    }\r\n\r\n    SetPosition(x, z)\r\n    {\r\n        if(this.startPos == null)\r\n            this.startPos = new THREE.Vector2(x, z);\r\n        this.Mesh.position.x = x;\r\n        this.Mesh.position.z = z;\r\n    }\r\n\r\n    SetDirection(x, z)\r\n    {\r\n        this.Direction.set(x,0,z);\r\n        this.Direction.normalize();\r\n    }\r\n\r\n    SetSpeed(speed)\r\n    {\r\n        this.speed = speed;\r\n    }\r\n\r\n    ResetPos()\r\n    {\r\n        if(this.startPos != null) {\r\n            this.SetPosition(this.startPos.x, this.startPos.y);\r\n            this.speed = 0;\r\n            this.Direction = this.Direction.set(0,0,0);\r\n        }\r\n    }\r\n\r\n    get mesh()\r\n    {\r\n        return this.Mesh;\r\n    }\r\n\r\n    get position()\r\n    {\r\n        return this.Mesh.position;\r\n    }\r\n}\r\n\r\nclass PoolBall extends Ball\r\n{\r\n    constructor(name, type)\r\n    {\r\n        super(name, type);\r\n    }\r\n\r\n    get type()\r\n    {\r\n        return this.Type;\r\n    }\r\n}\r\n\r\nclass PlayBall extends Ball {\r\n    constructor(name, type, tableGroup) {\r\n        super(name, type);\r\n\r\n        this.PowerDirection = true;\r\n        this.tableGroup = tableGroup;\r\n\r\n        this.CeuLenght = 100;\r\n        this.CeuMaterial = new THREE.MeshLambertMaterial({color: 0x800000});\r\n        this.CeuGeo = new THREE.CylinderGeometry(0.5, 1.5, this.CeuLenght, 32);\r\n        this.CeuMesh = new THREE.Mesh(this.CeuGeo, this.CeuMaterial);\r\n\r\n        this.PowerCubeMat = new THREE.MeshLambertMaterial({color: 0xFFFF00});\r\n        this.PowerCubeGeo = new THREE.BoxGeometry(2.5, 20, 2.5);\r\n        this.PowerCube = new THREE.Mesh(this.PowerCubeGeo, this.PowerCubeMat);\r\n\r\n        this.ceu = new THREE.Object3D();\r\n        this.ceu.add(this.CeuMesh);\r\n        this.ceu.add(this.PowerCube);\r\n        this.ceu.position.set(this.Mesh.position.x, this.Mesh.position.y, this.Mesh.position.z);\r\n\r\n        this.CeuMesh.rotation.x = -95 * Math.PI / 180;\r\n        this.CeuMesh.position.z = (Math.cos(5 * Math.PI / 180) * (this.CeuLenght + this.Radius + 10 + this.Radius)) / 2;\r\n        this.CeuMesh.position.y = (Math.sin(5 * Math.PI / 180) * (this.CeuLenght + this.Radius + 10 + this.Radius)) / 2;\r\n\r\n        this.PowerCube.position.y = 15;\r\n\r\n        this.CeuDirection = new THREE.Vector2(0, -1);\r\n\r\n        this.LineMat = new THREE.LineBasicMaterial({color: 0xFFFFFF});\r\n        this.LineGeo = new THREE.Geometry();\r\n        this.LineGeo.vertices.push(new THREE.Vector3().copy(this.position));\r\n        this.LineGeo.vertices.push(new THREE.Vector3(0,0,-75));\r\n\r\n        this.Line = new THREE.Line(this.LineGeo, this.LineMat);\r\n        this.Line.geometry.dynamic = true;\r\n\r\n        this.ShootEvent = new Event('onShoot');\r\n    }\r\n\r\n    SetVisibility(state)\r\n    {\r\n        this.ceu.visible = state;\r\n        this.Line.visible = state;\r\n    }\r\n\r\n    CheckKeys(controller)\r\n    {\r\n        if(this.ceu.visible) {\r\n            var rot = (parseInt($(\"#Display\").text())/10) * Math.PI / 180;\r\n            if (controller.GetKey(\"a\")) {\r\n                this.ceu.rotateY(rot);\r\n                this.CeuDirection.rotateAround(new THREE.Vector2(0, 0), -rot);\r\n            }\r\n            if (controller.GetKey(\"d\")) {\r\n                this.ceu.rotateY(-rot);\r\n                this.CeuDirection.rotateAround(new THREE.Vector2(0, 0), rot);\r\n            }\r\n            if(controller.GetKey(\"space\"))\r\n            {\r\n                this.StartMoving(this.CeuDirection, this.PowerCube.scale.y * 300);\r\n                document.dispatchEvent(this.ShootEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    SetPosition(x, z)\r\n    {\r\n        super.SetPosition(x, z);\r\n        this.ceu.position.set(x, this.Mesh.position.y, z);\r\n    }\r\n\r\n    CalcFrame(delta, tableGroup)\r\n    {\r\n        super.CalcFrame(delta, tableGroup);\r\n        this.ceu.position.add(this.currentSpeed);\r\n        if(this.ceu.visible) {\r\n            if (this.PowerCube.scale.y <= 0.1 && this.PowerDirection) {\r\n                this.PowerDirection = false;\r\n                this.PowerCube.scale.y = 0.1;\r\n            }\r\n            if (this.PowerCube.scale.y >= 1 && !this.PowerDirection) {\r\n                this.PowerDirection = true;\r\n                this.PowerCube.scale.y = 1;\r\n            }\r\n\r\n            if(!this.PowerDirection)\r\n                this.PowerCube.scale.y += 1 * delta;\r\n            if(this.PowerDirection)\r\n                this.PowerCube.scale.y -= 1 * delta;\r\n        }\r\n    }\r\n\r\n    StartMoving(direction, speed)\r\n    {\r\n        this.SetDirection(direction.x, direction.y);\r\n        this.speed = speed;\r\n    }\r\n\r\n    CalcNewLine()\r\n    {\r\n        this.LineMat = new THREE.LineBasicMaterial(0xFFFFFF);\r\n        this.LineGeo = new THREE.Geometry();\r\n\r\n        this.rayCaster.set(this.position, new THREE.Vector3(this.CeuDirection.x, 0, this.CeuDirection.y));\r\n        var intersects = this.rayCaster.intersectObjects(this.tableGroup);\r\n        var distance = intersects[0].distance;\r\n\r\n        this.LineGeo.vertices.push(new THREE.Vector3().copy(this.position));\r\n        var scaledDirVec = new THREE.Vector2().copy(this.CeuDirection).multiplyScalar(distance);\r\n        this.LineGeo.vertices.push(new THREE.Vector3().copy(this.position).add(new THREE.Vector3(scaledDirVec.x, 0, scaledDirVec.y)));\r\n        this.Line = new THREE.Line(this.LineGeo, this.LineMat);\r\n        this.Line.geometry.verticesNeedUpdate = true;\r\n    }\r\n\r\n    get ceuMesh()\r\n    {\r\n        return this.ceu;\r\n    }\r\n}\r\n\r\nclass Hole\r\n{\r\n    constructor(x, z, name)\r\n    {\r\n        this.name = name;\r\n        this.Radius = 5;\r\n        //this.HoleMat = new THREE.MeshLambertMaterial({color: 0xFF0000, });\r\n        this.HoleMat = new THREE.MeshDepthMaterial({wireframe: true});\r\n        this.HoleGeo = new THREE.SphereGeometry(this.Radius, 10, 10);\r\n        this.HoleMesh = new THREE.Mesh(this.HoleGeo, this.HoleMat);\r\n        this.HoleMesh.receiveShadow = true;\r\n        this.HoleMesh.castShadow = true;\r\n\r\n        this.HoleMesh.position.set(x, 0, z);\r\n    }\r\n\r\n    CheckBall(ball)\r\n    {\r\n        var distance = this.HoleMesh.position.distanceTo(ball.position);\r\n        if(distance < ball.Radius + this.Radius)\r\n        {\r\n            return ball;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    get mesh()\r\n    {\r\n        return this.HoleMesh;\r\n    }\r\n}\r\n\r\nclass Player\r\n{\r\n    constructor(name, id)\r\n    {\r\n        this.Name = name;\r\n        this.BallType = 0;\r\n        this.OwnBallsPut = 0;\r\n        this.ID = id;\r\n        this.PuttedBalls = [];\r\n    }\r\n\r\n    BallsPut(nr)\r\n    {\r\n        this.OwnBallsPut += nr;\r\n    }\r\n\r\n    AddBall(ball)\r\n    {\r\n        this.PuttedBalls.push(ball);\r\n    }\r\n\r\n    ClearBalls()\r\n    {\r\n        this.PuttedBalls = [];\r\n    }\r\n\r\n    get Score()\r\n    {\r\n        return this.OwnBallsPut;\r\n    }\r\n}\r\n\r\nclass Control\r\n{\r\n    constructor()\r\n    {\r\n        var self = this;\r\n        this.keyList = {};\r\n        $(document).keydown((e)=>{self.OnKeyDown(e)});\r\n        $(document).keyup((e)=>{self.OnKeyUp(e)});\r\n        $(document).scroll(function (e) {\r\n            e.preventDefault();\r\n\r\n        });\r\n\r\n        //ColorChange CameraRotPad\r\n        $(\".cameraRotPad\").mouseenter(function () {\r\n            $(this).css(\"background-color\", \"#AAAAFF\");\r\n        });\r\n        $(\".cameraRotPad\").mouseleave(function () {\r\n            $(this).css(\"background-color\", \"#0000FF\");\r\n        });\r\n\r\n        //ColorChange CeuRotPad\r\n        $(\".ceuRotPad\").mouseenter(function () {\r\n            $(this).css(\"background-color\", \"#FFAAAA\");\r\n        });\r\n        $(\".ceuRotPad\").mouseleave(function () {\r\n            $(this).css(\"background-color\", \"#FF0000\");\r\n        });\r\n\r\n        //ColorChange CeuRotPad\r\n        $(\".ceuRotSpeedPad\").mouseenter(function () {\r\n            $(this).css(\"background-color\", \"#AACCAA\");\r\n        });\r\n        $(\".ceuRotSpeedPad\").mouseleave(function () {\r\n            $(this).css(\"background-color\", \"#00CC00\");\r\n        });\r\n\r\n        //ColorChange CameraHeightPad\r\n        $(\".cameraHeightPad\").mouseenter(function () {\r\n            $(this).css(\"background-color\", \"#AAFFAA\");\r\n        });\r\n        $(\".cameraHeightPad\").mouseleave(function () {\r\n            $(this).css(\"background-color\", \"#00FF00\");\r\n        });\r\n\r\n        //ColorChange shootbutton\r\n        $(\"#shootButton\").mouseenter(function () {\r\n            $(this).css(\"background-color\", \"#FFAAAA\");\r\n        });\r\n        $(\"#shootButton\").mouseleave(function () {\r\n            $(this).css(\"background-color\", \"#FF0000\");\r\n        });\r\n\r\n        //ShootButton\r\n        $(\"#shootButton\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#990000\");\r\n            self.SetKey(\"space\", true);\r\n        });\r\n        $(\"#shootButton\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#FF0000\");\r\n            self.SetKey(\"space\", false);\r\n        });\r\n\r\n        //Dpad1\r\n        $(\"#dPad1\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#000099\");\r\n            self.SetKey(\"a\", true);\r\n        });\r\n        $(\"#dPad1\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#0000FF\");\r\n            self.SetKey(\"a\", false);\r\n        });\r\n\r\n        //Dpad2\r\n        $(\"#dPad2\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#000099\");\r\n            self.SetKey(\"d\", true);\r\n        });\r\n        $(\"#dPad2\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#0000FF\");\r\n            self.SetKey(\"d\", false);\r\n\r\n        });\r\n\r\n        //Dpad3\r\n        $(\"#dPad3\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#990000\");\r\n            self.SetKey(\"left\", true);\r\n        });\r\n        $(\"#dPad3\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#FF0000\");\r\n            self.SetKey(\"left\", false);\r\n        });\r\n\r\n        //Dpad4\r\n        $(\"#dPad4\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#990000\");\r\n            self.SetKey(\"right\", true);\r\n        });\r\n        $(\"#dPad4\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#FF0000\");\r\n            self.SetKey(\"right\", false);\r\n        });\r\n\r\n        //Dpad5\r\n        $(\"#dPad5\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#009900\");\r\n            self.SetKey(\"up\", true);\r\n        });\r\n        $(\"#dPad5\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#00FF00\");\r\n            self.SetKey(\"up\", false);\r\n        });\r\n\r\n        //Dpad6\r\n        $(\"#dPad6\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#009900\");\r\n            self.SetKey(\"down\", true);\r\n        });\r\n        $(\"#dPad6\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#00FF00\");\r\n            self.SetKey(\"down\", false);\r\n        });\r\n\r\n        //Dpad 7\r\n        $(\"#dPad7\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#007700\");\r\n            self.ChangeValue(false);\r\n        });\r\n        $(\"#dPad7\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#00CC00\");\r\n        });\r\n\r\n        //Dpad 8\r\n        $(\"#dPad8\").on(\"touchstart mousedown\", function () {\r\n            $(this).css(\"background-color\", \"#007700\");\r\n            self.ChangeValue(true);\r\n        });\r\n        $(\"#dPad8\").on(\"touchend mouseup mouseleave\", function () {\r\n            $(this).css(\"background-color\", \"#00CC00\");\r\n        });\r\n    }\r\n\r\n    OnKeyDown(e)\r\n    {\r\n        this.SetKey(this.KeyNormalizer(e.keyCode), true);\r\n    }\r\n\r\n    OnKeyUp(e)\r\n    {\r\n        this.SetKey(this.KeyNormalizer(e.keyCode), false);\r\n    }\r\n\r\n    SetKey(key, isPressed)\r\n    {\r\n        //only take valid outputs from keyNormalizer\r\n        if(key != null)\r\n        {\r\n            this.keyList[key] = isPressed;\r\n        }\r\n    }\r\n\r\n    GetKey(key)\r\n    {\r\n        return this.keyList[key];\r\n    }\r\n\r\n    KeyNormalizer(key)\r\n    {\r\n        switch(key)\r\n        {\r\n            //In case of space\r\n            case 32:\r\n                return \"space\";\r\n            //In case of up\r\n            case 38:\r\n                return \"up\";\r\n            //In case of left\r\n            case 37:\r\n                return \"left\";\r\n            //In case of right\r\n            case 39:\r\n                return \"right\";\r\n            //In case of down\r\n            case 40:\r\n                return \"down\";\r\n            //In case of\r\n            case 65:\r\n                return \"a\";\r\n            //In case of d\r\n            case 68:\r\n                return \"d\";\r\n            //In case of q\r\n            case 81:\r\n                this.ChangeValue(false);\r\n                break;\r\n            //In case of e\r\n            case 69:\r\n                this.ChangeValue(true);\r\n                break;\r\n            //In case none of the above return null\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    ChangeValue(increment)\r\n    {\r\n        var $Display = $(\"#Display\");\r\n        var currentValue = $Display.text();\r\n        if(increment && currentValue < 20)\r\n        {\r\n            currentValue = parseInt(currentValue) + 1;\r\n        }\r\n        else if(!increment && currentValue > 1)\r\n        {\r\n            currentValue = parseInt(currentValue) - 1;\r\n        }\r\n        $Display.text(currentValue);\r\n    }\r\n}\r\n\r\nclass PoolTable\r\n{\r\n    constructor()\r\n    {\r\n        this.tableGroup = new THREE.Group();\r\n\r\n        var borderMat = new THREE.MeshLambertMaterial({color: 0x00FF00});\r\n        var floorMat = new THREE.MeshLambertMaterial({color: 0x016903});\r\n\r\n        var longGeo = new THREE.BoxGeometry(10,8,320);\r\n        var shortGeo = new THREE.BoxGeometry(170, 8, 10);\r\n        var floorGeo = new THREE.BoxGeometry(150, 2, 300);\r\n\r\n        var floorMesh = new THREE.Mesh(floorGeo, floorMat);\r\n        floorMesh.position.y = -1;\r\n        floorMesh.castShadow = true;\r\n        floorMesh.receiveShadow = true;\r\n\r\n        var longLeft = new THREE.Mesh(longGeo, borderMat);\r\n        longLeft.position.x = -80;\r\n        longLeft.position.y = 2.5;\r\n        longLeft.receiveShadow = true;\r\n        longLeft.castShadow = true;\r\n\r\n        var longRight = new THREE.Mesh(longGeo, borderMat);\r\n        longRight.position.x = 80;\r\n        longRight.position.y = 2.5;\r\n        longRight.receiveShadow = true;\r\n        longRight.castShadow = true;\r\n\r\n        var shortFar = new THREE.Mesh(shortGeo, borderMat);\r\n        shortFar.position.z = -155;\r\n        shortFar.position.y = 2.5;\r\n        shortFar.castShadow = true;\r\n        shortFar.receiveShadow = true;\r\n\r\n        var shortClose = new THREE.Mesh(shortGeo, borderMat);\r\n        shortClose.position.z = 155;\r\n        shortClose.position.y = 2.5;\r\n        shortClose.castShadow = true;\r\n        shortClose.receiveShadow = true;\r\n\r\n        this.tableGroup.add(floorMesh);\r\n        this.tableGroup.add(longLeft);\r\n        this.tableGroup.add(longRight);\r\n        this.tableGroup.add(shortFar);\r\n        this.tableGroup.add(shortClose);\r\n    }\r\n\r\n    get mesh()\r\n    {\r\n        return this.tableGroup;\r\n    }\r\n\r\n    get children()\r\n    {\r\n        return this.tableGroup.children;\r\n    }\r\n}\r\n\r\n"]}