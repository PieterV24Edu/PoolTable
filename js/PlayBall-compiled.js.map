{"version":3,"sources":["PlayBall.js"],"names":[],"mappings":"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","file":"PlayBall-compiled.js","sourcesContent":["class PlayBall extends Ball {\r\n    constructor(name, type, tableGroup) {\r\n        super(name, type);\r\n\r\n        this.PowerDirection = true;\r\n        this.tableGroup = tableGroup;\r\n\r\n        this.CeuLenght = 100;\r\n        this.CeuMaterial = new THREE.MeshLambertMaterial({color: 0x800000});\r\n        this.CeuGeo = new THREE.CylinderGeometry(0.5, 1.5, this.CeuLenght, 32);\r\n        this.CeuMesh = new THREE.Mesh(this.CeuGeo, this.CeuMaterial);\r\n\r\n        this.PowerCubeMat = new THREE.MeshLambertMaterial({color: 0xFFFF00});\r\n        this.PowerCubeGeo = new THREE.BoxGeometry(2.5, 20, 2.5);\r\n        this.PowerCube = new THREE.Mesh(this.PowerCubeGeo, this.PowerCubeMat);\r\n\r\n        this.ceu = new THREE.Object3D();\r\n        this.ceu.add(this.CeuMesh);\r\n        this.ceu.add(this.PowerCube);\r\n        this.ceu.position.set(this.Mesh.position.x, this.Mesh.position.y, this.Mesh.position.z);\r\n\r\n        this.CeuMesh.rotation.x = -95 * Math.PI / 180;\r\n        this.CeuMesh.position.z = (Math.cos(5 * Math.PI / 180) * (this.CeuLenght + this.Radius + 10 + this.Radius)) / 2;\r\n        this.CeuMesh.position.y = (Math.sin(5 * Math.PI / 180) * (this.CeuLenght + this.Radius + 10 + this.Radius)) / 2;\r\n\r\n        this.PowerCube.position.y = 15;\r\n\r\n        this.CeuDirection = new THREE.Vector2(0, -1);\r\n\r\n        this.LineMat = new THREE.LineBasicMaterial({color: 0xFFFFFF});\r\n        this.LineGeo = new THREE.Geometry();\r\n        this.LineGeo.vertices.push(new THREE.Vector3().copy(this.position));\r\n        this.LineGeo.vertices.push(new THREE.Vector3(0,0,-75));\r\n\r\n        this.Line = new THREE.Line(this.LineGeo, this.LineMat);\r\n        this.Line.geometry.dynamic = true;\r\n\r\n        this.ShootEvent = new Event('onShoot');\r\n    }\r\n\r\n    SetVisibility(state)\r\n    {\r\n        this.ceu.visible = state;\r\n        this.Line.visible = state;\r\n    }\r\n\r\n    CheckKeys(controller)\r\n    {\r\n        if(this.ceu.visible) {\r\n            var rot = (parseInt($(\"#Display\").text())/10) * Math.PI / 180;\r\n            if (controller.GetKey(\"a\")) {\r\n                this.ceu.rotateY(rot);\r\n                this.CeuDirection.rotateAround(new THREE.Vector2(0, 0), -rot);\r\n            }\r\n            if (controller.GetKey(\"d\")) {\r\n                this.ceu.rotateY(-rot);\r\n                this.CeuDirection.rotateAround(new THREE.Vector2(0, 0), rot);\r\n            }\r\n            if(controller.GetKey(\"space\"))\r\n            {\r\n                this.StartMoving(this.CeuDirection, this.PowerCube.scale.y * 300);\r\n                document.dispatchEvent(this.ShootEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    SetPosition(x, z)\r\n    {\r\n        super.SetPosition(x, z);\r\n        this.ceu.position.set(x, this.Mesh.position.y, z);\r\n    }\r\n\r\n    CalcFrame(delta, tableGroup)\r\n    {\r\n        super.CalcFrame(delta, tableGroup);\r\n        this.ceu.position.add(this.currentSpeed);\r\n        if(this.ceu.visible) {\r\n            if (this.PowerCube.scale.y <= 0.1 && this.PowerDirection) {\r\n                this.PowerDirection = false;\r\n                this.PowerCube.scale.y = 0.1;\r\n            }\r\n            if (this.PowerCube.scale.y >= 1 && !this.PowerDirection) {\r\n                this.PowerDirection = true;\r\n                this.PowerCube.scale.y = 1;\r\n            }\r\n\r\n            if(!this.PowerDirection)\r\n                this.PowerCube.scale.y += 1 * delta;\r\n            if(this.PowerDirection)\r\n                this.PowerCube.scale.y -= 1 * delta;\r\n        }\r\n    }\r\n\r\n    StartMoving(direction, speed)\r\n    {\r\n        this.SetDirection(direction.x, direction.y);\r\n        this.speed = speed;\r\n    }\r\n\r\n    CalcNewLine()\r\n    {\r\n        this.LineMat = new THREE.LineBasicMaterial(0xFFFFFF);\r\n        this.LineGeo = new THREE.Geometry();\r\n\r\n        this.rayCaster.set(this.position, new THREE.Vector3(this.CeuDirection.x, 0, this.CeuDirection.y));\r\n        var intersects = this.rayCaster.intersectObjects(this.tableGroup);\r\n        var distance = intersects[0].distance;\r\n\r\n        this.LineGeo.vertices.push(new THREE.Vector3().copy(this.position));\r\n        var scaledDirVec = new THREE.Vector2().copy(this.CeuDirection).multiplyScalar(distance);\r\n        this.LineGeo.vertices.push(new THREE.Vector3().copy(this.position).add(new THREE.Vector3(scaledDirVec.x, 0, scaledDirVec.y)));\r\n        this.Line = new THREE.Line(this.LineGeo, this.LineMat);\r\n        this.Line.geometry.verticesNeedUpdate = true;\r\n    }\r\n\r\n    get ceuMesh()\r\n    {\r\n        return this.ceu;\r\n    }\r\n}"]}