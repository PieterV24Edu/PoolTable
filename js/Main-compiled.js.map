{"version":3,"sources":["Main.js"],"names":[],"mappings":"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","file":"Main-compiled.js","sourcesContent":["//1 unit = 1cm\r\n\r\n$(document).ready(function () {\r\n    init();\r\n});\r\n\r\nvar container;\r\n\r\nvar camera, scene, renderer, loader, textureManager;\r\n\r\nvar myTextureArray = [];\r\n\r\nvar cameraControl;\r\n\r\nvar clock;\r\n\r\nvar poolTable, ballArray, playBallStart = 75, eightballstart;\r\nvar startPosArray;\r\nvar collisionArray = [];\r\n\r\nvar windowHalfX, windowHalfY;\r\n\r\nfunction init() {\r\n    windowHalfX = window.innerWidth / 2;\r\n    windowHalfY = window.innerHeight / 2;\r\n\r\n    container = document.createElement(\"div\");\r\n    document.body.appendChild(container);\r\n\r\n    cameraControl = new CameraControl();\r\n    textureManager = new THREE.LoadingManager();\r\n    loader = new THREE.TextureLoader(textureManager);\r\n\r\n    renderer = new THREE.WebGLRenderer({antialias: true});\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    renderer.setClearColor(0x0000FF);\r\n    renderer.shadowMap.enabled = true;\r\n    container.appendChild(renderer.domElement);\r\n\r\n    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);\r\n    //camera.position.y = 210;\r\n    camera.position.x = -200;\r\n    camera.position.y = 100;\r\n\r\n    scene = new THREE.Scene();\r\n    clock = new THREE.Clock();\r\n\r\n    var amLight = new THREE.AmbientLight(0x777777);\r\n    amLight.position.y = 15;\r\n\r\n    var light = new THREE.PointLight(0xffffff, 1.5, 500);\r\n    light.position.y = 50;\r\n    light.castShadow = true;\r\n\r\n    poolTable = new PoolTable();\r\n\r\n    ballArray = [\r\n        new PoolBall(0),\r\n        new PoolBall(1),\r\n        new PoolBall(2),\r\n        new PoolBall(3),\r\n        new PoolBall(4),\r\n        new PoolBall(5),\r\n        new PoolBall(6),\r\n        new PoolBall(7),\r\n        new PoolBall(8),\r\n        new PoolBall(9),\r\n        new PoolBall(10),\r\n        new PoolBall(11),\r\n        new PoolBall(12),\r\n        new PoolBall(13),\r\n        new PoolBall(14),\r\n        new PoolBall(15)\r\n    ];\r\n\r\n    playBallStart = new THREE.Vector2(0, 75);\r\n    eightballstart = new THREE.Vector2(0, -87);\r\n\r\n    startPosArray = [\r\n        [playBallStart.x, playBallStart.y],\r\n        [0,-75],\r\n        [-3, -81],[3, -81],\r\n        [-6, -87],[eightballstart.x, eightballstart.y],[6, -87],\r\n        [-9, -93],[-3, -93],[3, -93],[9, -93],\r\n        [-12, -99],[-6, -99],[0, -99],[6, -99],[12, -99]\r\n    ];\r\n\r\n    for(let i = 0; i < ballArray.length; i++)\r\n    {\r\n        ballArray[i].position.set(startPosArray[i][0],2.85,startPosArray[i][1]);\r\n        ballArray[i].mesh.rotation.z = 0.5*Math.PI;\r\n        ballArray[i].mesh.rotation.y = -0.5*Math.PI;\r\n        if(i >= 1 && i <= 15)\r\n            ballArray[i].Material.map = loader.load(\"assets/textures/Ball\" + i + \".png\");\r\n    }\r\n\r\n    textureManager.onStart = function () {\r\n        for(let i = 1; i < ballArray; i++)\r\n        {\r\n            ballArray[i].Material.map = loader.load(\"assets/textures/Ball\" + i + \".png\");\r\n        }\r\n    };\r\n\r\n    for(let i = 0; i < ballArray.length; i++)\r\n    {\r\n        var tempArray = [];\r\n        for(let j = 0 + i; j < ballArray.length; j++)\r\n        {\r\n            tempArray[j] = false;\r\n        }\r\n        collisionArray[i] = tempArray;\r\n    }\r\n\r\n    scene.add(amLight);\r\n    scene.add(light);\r\n\r\n    scene.add(poolTable.mesh);\r\n\r\n    for(let i = 0; i < ballArray.length; i++)\r\n    {\r\n        scene.add(ballArray[i].mesh);\r\n    }\r\n\r\n    window.addEventListener('resize', onWindowResize, false);\r\n\r\n    textureManager.onLoad = function () {\r\n        animate();\r\n    };\r\n}\r\n\r\nfunction animate() {\r\n    requestAnimationFrame(animate);\r\n\r\n    render();\r\n}\r\n\r\nfunction render() {\r\n    var clockDelta = clock.getDelta();\r\n\r\n    for(let i = 0; i < ballArray.length; i++)\r\n    {\r\n        ballArray[i].CalcMovement(clockDelta, poolTable.children);\r\n    }\r\n\r\n    for(let i = 0; i < ballArray.length; i++)\r\n    {\r\n        for(let j = i + 1; j < ballArray.length; j++)\r\n        {\r\n            if(collisionArray[i][j] == false)\r\n            {\r\n                ballArray[i].BallCollision(ballArray[j]);\r\n            }\r\n            collisionArray[i][j] = ballArray[i].CheckBallCollision(ballArray[j]);\r\n        }\r\n    }\r\n\r\n    checkKeys();\r\n    camera.lookAt(new THREE.Vector3(0,0,0));\r\n\r\n    renderer.render(scene, camera);\r\n}\r\n\r\nfunction checkKeys() {\r\n    var center = new THREE.Vector3(0,0,0);\r\n    if(cameraControl.GetKey(\"left\") == true)\r\n    {\r\n        var newRot = calcNewRot(camera.position.x, camera.position.z, 0.05, center);\r\n        camera.position.set(newRot.x, camera.position.y, newRot.y);\r\n    }\r\n    if(cameraControl.GetKey(\"right\") == true)\r\n    {\r\n        var newRot = calcNewRot(camera.position.x, camera.position.z, -0.05, center);\r\n        camera.position.set(newRot.x, camera.position.y, newRot.y);\r\n    }\r\n    if(cameraControl.GetKey(\"up\"))\r\n    {\r\n        if(camera.position.y < 200)\r\n            camera.position.y += 5;\r\n    }\r\n    if(cameraControl.GetKey(\"down\"))\r\n    {\r\n        if(camera.position.y > 20)\r\n            camera.position.y += -5;\r\n    }\r\n\r\n    if(cameraControl.GetKey(\"a\") && cameraControl.GetKey(\"d\"))\r\n    {\r\n        onClick();\r\n    }\r\n}\r\n\r\nfunction calcNewRot(x,y, rotation, center){\r\n    var center = new THREE.Vector2(center.x,center.y);\r\n    var vector = new THREE.Vector2(x,y);\r\n    vector.rotateAround(center, rotation);\r\n    return vector;\r\n}\r\n\r\nfunction onWindowResize() {\r\n    windowHalfX = window.innerWidth /2;\r\n    windowHalfY = window.innerHeight /2;\r\n\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n}\r\n\r\nfunction  onClick() {\r\n    ballArray[0].SetDirection(0,-1);\r\n    ballArray[0].SetSpeed(200);\r\n}"]}